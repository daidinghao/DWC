<html>
    <head>
        <title>Practica 1</title>

        <style>

            .Flex{
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .Titulo{
                display: flex;
                background-color: chocolate;
                color: white;
                justify-content: center;
                align-items: center;
            }
            
            .Imagen{
                width: 300px;
            }

            .Formulario{
                order: 1;
            }
            .Error{
                border: 2px solid red;
            }

            .Error_Mensaje {
                background-color: red; 
                color: white; 
                padding: 10px;
                margin-top: 10px;
                display: none;
            }

            .Error_Mensaje_NumSerie {
                color: red; 
                display: none; 
            }

        </style>

        <script type="text/javascript">
           //Mostrar Descripcion
            function MostrarDes(){
                //Detectar el estilo del elemento cuyo ID es el siguiente hermano de texto
                if(this.nextElementSibling.style.display == 'none'){    
                    //el elemento anterior de este elemento
                    this.nextElementSibling.style.display = 'block';
                    //el siguiente elemento de este elemento
                    this.previousElementSibling.style.display = 'block';
                    this.style.display = 'none';
                }
            }
            
            //CambiarImagen se usa para cambiar imágenes
            function CambiarImagen(){
                var Imagen = document.getElementById('img'); // Obtener elementos de imagen
                var ValueEle = document.getElementById('imageSelector').value; // Obtener el valor seleccionado

                //Cambiar imágenes según la selección
                if(ValueEle == 'Dis'){
                    Imagen.src = "Imagen/Distribucion.png"; //Ruta de la imagen, relativa
                    Imagen.alt = "Distribucion";
                }else if (ValueEle == 'Ofi'){
                    Imagen.src = "Imagen/Oficina.png";
                    Imagen.alt = "Oficina";
                }else if (ValueEle == 'Pro'){
                    Imagen.src = "Imagen/Produccion.png";
                    Imagen.alt = "Produccion";
                }
            }      

            let EsError = false; //Tiene el error, NO.

            //Numero de Serie para es Valida
            function NumSerieValida(Event){
                var NumSerie = document.getElementById('NumSerie'); //Obtener el numero serie
                var Mensaje = document.getElementById('Mensaje_Num'); //Obtener el mensaje de numero serie
                var ExpReg = /^\d{3}[A-Z]{4}(1|2|A)$/; //3 numero, 4 Mayuscula, 1 or 2 or A

                //Compruebe si NumSerie se ajusta al formato (expresión regular)
                if(ExpReg.test(NumSerie.value)){ 
                    //Conforme, los bordes de error se eliminan y el mensaje de error se ocultará
                    NumSerie.classList.remove('Error');
                    Mensaje.style.display = 'none';
                    EsError = false;
                }else{
                    //No Conforme, no se puede enviar, se agregaron bordes incorrectos, aparecerá un mensaje incorrecto
                    Event.preventDefault();
                    NumSerie.classList.add('Error');
                    Mensaje.style.display = 'block';
                    Mensaje.textContent = 'El formato debe ser: dígitos + 4 letras mayúsculas + 1 o 2 o A';
                    EsError = true;
                }
            }

            function LimpiarEstado() {
                var NumSerie = document.getElementById('NumSerie');
                var Mensaje = document.getElementById('Mensaje');

                if(EsError){
                    //Si no coincide, el cuadro de texto se actualizará y se mostrará el mensaje de error
                    NumSerie.value = '';
                    NumSerie.classList.remove('Error');
                    Mensaje.style.display = 'none';
                }
            }

            //Checkbox seleccion es Valida
            function CheckBoxValida(Event){
                var ConcptEle =document.getElementById('Concpt');
                var Mensaje = document.getElementById('Mensaje_Concpt');

                if(ConcptEle){
                    Mensaje.style.display = 'none';
                    EsError = false;
                }else{
                    Event.preventDefault();
                    Mensaje.style.display = 'block';
                    Mensaje.textContent = 'Necesita select'
                    EsError = true;
                }
            }


        </script> 
    </head>

    <body>
        <h1 class="Titulo">INFORME INCIDENCIA</h1>
        <div class="Flex">
            <!-- Formulario -->
            <div class="Formulario">
                <form id="Formulario" onsubmit="">
                    <!--Selección del cuadro desplegable de imagen-->
                    <label for="TipoIncidencia">Tipo de Incidencia</label>
                    <select id="imageSelector" onchange="CambiarImagen()">
                        <option value="Dis">Distribucion</option>
                        <option value="Ofi">Oficina</option>
                        <option value="Pro">Producción</option>
                    </select>
                    <br>
        
                    <!-- Introduzca el número de serie -->
                    <label for="NumSerie">Numero de serie</label>
                    <input type="text" id="NumSerie" placeholder="eje: 123ABCD1" onfocus ="LimpiarEstado()"> <!--LimpiarEstado se ejecutará al hacer clic-->
                    <div id="Mensaje_Num" class="Error_Mensaje_NumSerie"></div>
                    <br>
        
                    <!-- Botón para mostrar y ocultar descripción -->
                    <label for="Descrip" style="display: none;">Descripcion</label>
                    <input type="button" id="texto" value="Mostrar Descripcion""> <!--El elemento que se escucha-->
                    <textarea rows="6" cols="100" style="display: none;"></textarea>
                    <br>
        
                    <!--La casilla de verificación es correcta -->
                    <input type="checkbox" id="Concpt">
                    <label for="Concpt">He leido y acepto las condiciones del servicio</label>
                    <div id="Mensaje_Concpt" class="Error_Mensaje"></div>
                    <br>  
        
                    <!-- Enviar -->
                    <input type="submit" id="Enviar" value="Enviar Datos">
        
                </form>
            </div>

            <!--Mostrar imagen-->
            <div class="Imagen">
                <img id="img" src="Imagen/Distribucion.png" alt="Distribucion">
            </div>
        </div>
    <!--Codigo de body-->
    <script type="text/javascript">  

        //Escuche el botón que muestra el texto
        document.getElementById('texto').addEventListener("click", MostrarDes);

        //Escuche el botón de enviar para detectar numero serie
        document.getElementById('Enviar').addEventListener('click',NumSerieValida);

        //Escuche el botón de enviar para compruebe si la opción está marcada
        document.getElementById('Enviar').addEventListener('click',CheckBoxValida);

    </script>    
    </body>
</html>